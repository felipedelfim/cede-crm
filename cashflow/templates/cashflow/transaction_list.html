{% extends 'cashflow/base.html' %}

{% block content %}
<div class="span12">
	<div class="widget">
		<div class="widget-header">
			<i class="icon-th-large"></i>
			<h3>Transações</h3>
		</div>
		<div class="widget-content">
		{% if transaction_list %}
		      <table class="table table-striped table-bordered">
                <thead>
                  <tr>
										<th> Frequentador </th>
										<th> Grupo </th>
                    <th> Item </th>
										<th> Quantidade </th>
										<th> Total </th>
                    <th> Forma </th>
                    <th> Status </th>
                    <th> Ações </th>
                  </tr>
                </thead>
                <tbody>
                {% for transaction in transaction_list %}
                  <tr>
                    <td> {{ transaction.person.name }} </td>
										<td> {{ transaction.person.group.name }} </td>
                    <td> {{ transaction.item.name }} </td>
										<td> {{ transaction.amount }} </td>
										<td> {{ transaction.total }} </td>
                    <td> {{ transaction.method.name }} </td>
                    <td>
                    	{% if transaction.was_paid %}
                    		<span class="label label-success">Pago</span>
                    	{% else %}
                    		<span class="label label-warning">Não Pago</span>
                    	{% endif %}
                    </td>
                    <td class="btn-group">
										  <a type="button" class="btn btn-primary" href="{% url 'cashflow:transaction_edit' pk=transaction.pk %}">Editar</a>
										  <a type="button" class="btn btn-primary dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
										    <span class="caret"></span>
										  </a>
										  <ul class="dropdown-menu">
										    <li><a href="{% url 'cashflow:transaction_edit' pk=transaction.pk %}">Editar</a></li>
										    {% if transaction.was_paid == False %}
										    	<li><a href="{% url 'cashflow:transaction_pay' pk=transaction.pk %}">Marcar como Pago</a></li>
										    {% endif %}
												{% if user.is_authenticated %}
											    <li role="separator" class="divider"></li>
											    <li><a href="{% url 'cashflow:transaction_remove' pk=transaction.pk %}">Excluir</a></li>
												{% endif %}
										  </ul>
                    </td>
                  </tr>
                {% endfor %}
                </tbody>
              </table>
		{% else %}
		    <p>No transactions are available.</p>
		{% endif %}
		</div>
	</div>
</div>
{% endblock %}
